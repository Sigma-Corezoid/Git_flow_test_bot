{"obj_type":1,"obj_id":1012024,"parent_id":424867,"title":"initChat","description":"","status":"active","params":[],"ref_mask":true,"conv_type":"process","scheme":{"nodes":[{"id":"61adf4a782ba9651b2f9024b","obj_type":0,"condition":{"logics":[{"to_node_id":"61adf4a782ba9651b2f9024e","type":"go_if_const","conditions":[{"param":"user_name","const":"","fun":"eq","cast":"string"}],"chTime":1561389859503},{"type":"go","to_node_id":"61adf4a882ba9651b2f90323","chTime":1561389849235}],"semaphors":[]},"title":"","description":"","x":1100,"y":-68,"uuid":"860abc19-0654-404e-a858-ac6a41437855","extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}","options":null},{"id":"61adf4a882ba9651b2f90323","obj_type":0,"condition":{"logics":[{"type":"api_sender","err_node_id":"61adf4a882ba9651b2f90322","form_type":"action","conv_id":"{{root.conv_id}}","version":2,"name":"","extra_type":{"categoryId":"string","robotId":"string","from":"string","companyId":"string","formId":"string","convId":"string","procId":"string","model":"object","modelType":"object"},"model":{"clientId":"{{chat_id}}","channel":"{{channel}}","language":"en","name":"{{user_name}}_{{channel}}","photo":"{{channel}}_{{chat_id}}"},"model_type":{"clientId":"string","channel":"string","language":"string","name":"string","photo":"string"},"extra":{"categoryId":"widgets","robotId":"corezoidWidgetReg","from":"i647937213","companyId":"sender","formId":"","convId":"{{root.conv_id}}","procId":"{{root.ref}}","model":{"clientId":"{{chat_id}}","channel":"{{channel}}","language":"en","name":"{{user_name}}_{{channel}}","photo":"{{channel}}_{{chat_id}}"},"modelType":{"clientId":"string","channel":"string","language":"string","name":"string","photo":"string"}},"max_threads":25,"content-type":"application/json","mode":"POST","format":""},{"type":"go","to_node_id":"61adf4a882ba9651b2f9038e","chTime":1488880007283}],"semaphors":[]},"title":"Register user for Bot Platform","description":"","x":1100,"y":200,"uuid":"a2f0e079-cb40-4060-b3bc-e6a780224f9b","extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}","options":null},{"id":"61adf4a882ba9651b2f9038e","obj_type":0,"condition":{"logics":[{"node_title":"User for Bot platform NOT registered","conditions":[{"fun":"not_eq","const":"ok","param":"answerParam","cast":"string"}],"to_node_id":"61adf4a8513aa03475f78680","type":"go_if_const","data":[{"fun":"not_eq","const":"ok","param":"answerParam","cast":"string"}]},{"type":"go","to_node_id":"61adf4a782ba9651b2f9024f","chTime":1524208422528}],"semaphors":[]},"title":"User for Bot platform is registered?","description":"","x":1100,"y":416,"uuid":"ef992be7-1386-407b-a55f-3ce63dee4144","extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}","options":null},{"id":"61adf4a882ba9651b2f90322","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"61adf4a882ba9651b2f9038f","conditions":[{"fun":"eq","const":"hardware","param":"__conveyor_api_return_type_error__","cast":"string"}]},{"type":"go_if_const","to_node_id":"61adf4a882ba9651b2f9038f","conditions":[{"fun":"eq","const":"software","param":"__conveyor_api_return_type_error__","cast":"string"},{"fun":"eq","const":"api_bad_answer","param":"__conveyor_api_return_type_tag__","cast":"string"}]},{"type":"go","to_node_id":"61adf4a7513aa03475f785ae"}],"semaphors":[]},"title":"","description":"","x":1320,"y":284,"uuid":"29835b18-2682-482b-aef1-b995a25b26b4","extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}","options":null},{"id":"61adf4a8513aa03475f78680","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"status":"error"},"res_data_type":{"status":"string"},"mode":"key_value","throw_exception":true,"exception_reason":"User registration error"},{"type":"go","to_node_id":"61adf4a7513aa03475f785ac","chTime":1524208455129}],"semaphors":[]},"title":"Error","description":"","x":1472,"y":496,"uuid":"8b527b43-b2b0-40fa-80b1-5dcf2c3d3e33","extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}","options":null},{"id":"61adf4a8513aa03475f7873b","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"61adf4a882ba9651b2f903c3","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_return_type_tag__","cast":"string"}]},{"type":"go_if_const","to_node_id":"61adf4a882ba9651b2f903c3","conditions":[{"fun":"eq","const":"copy_task_timeout","param":"__conveyor_copy_task_return_type_tag__","cast":"string"}]},{"type":"go_if_const","to_node_id":"61adf4a882ba9651b2f903c3","conditions":[{"fun":"eq","const":"copy_task_fatal_error","param":"__conveyor_copy_task_return_type_tag__","cast":"string"}]},{"type":"go_if_const","to_node_id":"61adf4a7513aa03475f785ab","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_return_type_tag__","cast":"string"}]},{"type":"go_if_const","conditions":[{"param":"__conveyor_copy_task_return_type_tag__","const":"not_unical_ref","fun":"eq","cast":"string"}],"to_node_id":"61adf4a782ba9651b2f90250","chTime":1566572489495},{"type":"go","to_node_id":"61adf4a7513aa03475f785ab"}],"semaphors":[]},"title":"","description":"","x":1324,"y":692,"uuid":"f9982f8c-c221-4ccb-a919-0e2f3dd28d57","extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}","options":null},{"id":"61adf4a8513aa03475f786eb","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"61adf4a7513aa03475f785aa","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_return_type_tag__","cast":"string"}]},{"type":"go_if_const","to_node_id":"61adf4a7513aa03475f785aa","conditions":[{"fun":"eq","const":"copy_task_timeout","param":"__conveyor_copy_task_return_type_tag__","cast":"string"}]},{"type":"go_if_const","to_node_id":"61adf4a7513aa03475f785aa","conditions":[{"fun":"eq","const":"copy_task_fatal_error","param":"__conveyor_copy_task_return_type_tag__","cast":"string"}]},{"type":"go_if_const","to_node_id":"61adf4a7513aa03475f785aa","conditions":[{"fun":"eq","const":"duplicate_callback","param":"__conveyor_copy_task_return_type_tag__","cast":"string"}]},{"type":"go_if_const","to_node_id":"61adf4a882ba9651b2f90321","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_return_type_tag__","cast":"string"}]},{"type":"go","to_node_id":"61adf4a882ba9651b2f90321"}],"semaphors":[]},"title":"","description":"","x":768,"y":-220,"uuid":"4bbf1e92-2877-4d87-bade-3cb9814b1752","extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}","options":null},{"id":"61adf4a882ba9651b2f90320","obj_type":0,"condition":{"logics":[{"type":"api_copy","mode":"modify","data":{"unsubscribed":"false"},"data_type":{"unsubscribed":"boolean"},"group":"","ref":"{{channel}}_{{chat_id}}","is_sync":true,"err_node_id":"61adf4a8513aa03475f786eb","conv_id":1012054,"user_id":76110,"convTitle":"User Profile"},{"type":"go","to_node_id":"61adf4a782ba9651b2f9024b","chTime":1566570853252}],"semaphors":[]},"title":"Subscribe","description":"","x":860,"y":-288,"uuid":"63b8c44c-188c-46fa-9299-900c8896d552","extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}","options":null},{"id":"61adf4a8513aa03475f7867f","obj_type":0,"condition":{"logics":[{"to_node_id":"61adf4a882ba9651b2f90320","type":"go_if_const","conditions":[{"param":"unsubscribed","const":"true","fun":"eq","cast":"boolean"}],"chTime":1566570247743},{"type":"go","to_node_id":"61adf4a782ba9651b2f9024b","chTime":1566570846661}],"semaphors":[]},"title":"","description":"","x":1100,"y":-336,"uuid":"3d37e011-df66-42fc-8031-336c287bc298","extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}","options":null},{"id":"61adf4a8513aa03475f78681","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"","description":"","x":780,"y":72,"uuid":"f12b039b-89cb-4bb2-8ef3-2361ed3f4f08","extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}","options":null},{"id":"61adf4a882ba9651b2f9038f","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"61adf4a882ba9651b2f90323"}]},"title":"","description":"","x":1320,"y":200,"uuid":"fd9d0e02-364c-4a1e-abfa-94da9f68089d","extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}","options":null},{"id":"61adf4a7513aa03475f785aa","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"61adf4a882ba9651b2f90320"}]},"title":"","description":"","x":768,"y":-288,"uuid":"8e2f6ceb-c117-4bfa-85e5-e2a02c5e6ba3","extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}","options":null},{"id":"61adf4a7513aa03475f785ac","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"User for Bot platform NOT registered","description":"","x":1776,"y":524,"uuid":"15cbb38a-39d9-4ac8-a107-3e47a904b8f3","extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}","options":null},{"id":"61adf4a782ba9651b2f9024e","obj_type":0,"condition":{"logics":[{"type":"set_param","extra":{"user_name":"Anonymous"},"extra_type":{"user_name":"string"},"err_node_id":"61adf4a8513aa03475f78681"},{"type":"go","to_node_id":"61adf4a882ba9651b2f90323","chTime":1561389873067}],"semaphors":[]},"title":"anonymous","description":"","x":828,"y":-20,"uuid":"a317b583-21bc-4776-b979-8dc35decb56a","extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}","options":null},{"id":"61adf4a782ba9651b2f90250","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"status":"ok","sender_chat_id":"{{corezoidWidgetReg.chatId}}"},"res_data_type":{"status":"string","sender_chat_id":"string"},"mode":"key_value","throw_exception":false},{"type":"go","to_node_id":"61adf4a782ba9651b2f90252","chTime":1524208433202}],"semaphors":[]},"title":"Success","description":"","x":1100,"y":800,"uuid":"ca95e982-3baf-4b9f-aa62-7859478de30b","extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}","options":null},{"id":"61adf4a782ba9651b2f9024d","obj_type":0,"condition":{"logics":[{"type":"set_param","extra":{"unsubscribed":"{{conv[1012054].ref[{{channel}}_{{chat_id}}].unsubscribed}}"},"extra_type":{"unsubscribed":"boolean"},"err_node_id":"61adf4a7513aa03475f785a9","chTime":1566570187734},{"type":"go","to_node_id":"61adf4a8513aa03475f7867f","chTime":1566570185389}],"semaphors":[]},"title":"unsubscribed?","description":"","x":1100,"y":-536,"uuid":"f7d97f72-9d2a-4110-bdf7-917721817345","extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}","options":null},{"id":"61adf4a7513aa03475f785a9","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Final","description":"","x":1404,"y":-444,"uuid":"c274272d-d02e-4368-875d-40d67ed95e86","extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}","options":null},{"id":"61adf4a7513aa03475f785ad","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"","description":"","x":1776,"y":720,"uuid":"168fda10-27be-4bdb-bc4a-94adc91cb4a3","extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}","options":null},{"id":"61adf4a7513aa03475f785ab","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"status":"error"},"res_data_type":{"status":"string"},"mode":"key_value","throw_exception":true,"exception_reason":"save chat by user_id error"},{"type":"go","to_node_id":"61adf4a7513aa03475f785ad","chTime":1564658049764}],"semaphors":[]},"title":"Error","description":"","x":1472,"y":692,"uuid":"40479dc1-99fc-4856-bfb9-d2be25ef2141","extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}","options":null},{"id":"61adf4a782ba9651b2f90252","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Success","description":"","x":1200,"y":1004,"uuid":"9a7657f1-18e5-4755-a944-479c412d5c07","extra":"{\"modeForm\":\"collapse\",\"icon\":\"success\"}","options":null},{"id":"61adf4a782ba9651b2f9024f","obj_type":0,"condition":{"logics":[{"type":"api_copy","mode":"create","data":{"chat_id":"{{chat_id}}","channel":"{{channel}}","sender_chat_id":"{{corezoidWidgetReg.chatId}}","isOperatorConnected":"false"},"data_type":{"chat_id":"string","channel":"string","sender_chat_id":"string","isOperatorConnected":"boolean"},"group":"","ref":"{{channel}}_{{chat_id}}","err_node_id":"61adf4a8513aa03475f7873b","conv_id":1012023,"user_id":76110,"convTitle":"Chat State","chTime":1546529477752},{"type":"go","to_node_id":"61adf4a782ba9651b2f90250","chTime":1564485107588}],"semaphors":[]},"title":"Save chat info by user","description":"","x":1100,"y":616,"uuid":"ec0b263c-8dcf-492b-9ceb-f261699a4dda","extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}","options":null},{"id":"61adf4a7513aa03475f785ae","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"","description":"","x":1424,"y":312,"uuid":"7b4ad8d3-0b73-46e8-aaec-c7965c33bf5b","extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}","options":null},{"id":"61adf4a882ba9651b2f903c3","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"61adf4a782ba9651b2f9024f","chTime":1546529477765}]},"title":"","description":"","x":1324,"y":616,"uuid":"4a84ae0c-a3ba-42a3-98f1-ede777e0ab75","extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}","options":null},{"id":"61adf4a882ba9651b2f90321","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"","description":"","x":728,"y":-192,"uuid":"a8154b73-3f9c-42e3-b80d-ba72fc7b08eb","extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}","options":null},{"id":"61adf4a882ba9651b2f903c2","obj_type":1,"condition":{"logics":[{"type":"go","to_node_id":"61adf4a782ba9651b2f9024d"}],"semaphors":[]},"title":"Start","description":"","x":1200,"y":-592,"uuid":"995ec7e8-26d6-4936-975d-38f0e43b7b6d","extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}","options":null}],"web_settings":[[],[]]},"conv_type":"process","uuid":"fa089776-2ff4-4c65-ad11-4d1a52690212"}
{"obj_type":1,"obj_id":1012038,"parent_id":424861,"title":"CommandConverter","description":"","status":"active","params":[],"ref_mask":true,"conv_type":"process","scheme":{"nodes":[{"id":"61adf4a7513aa03475f78566","obj_type":0,"condition":{"logics":[{"to_node_id":"61adf4a782ba9651b2f90207","type":"go_if_const","conditions":[{"param":"{{message.text}}","const":"^\\/\\w+","fun":"regexp","cast":"string"}],"chTime":1542883189233},{"type":"go","to_node_id":"61adf4a8513aa03475f786da","chTime":1542883165460}],"semaphors":[]},"title":"","description":"","x":1464,"y":268,"uuid":"886526bb-ce45-419f-97a1-76511046997b","extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}","options":null},{"id":"61adf4a7513aa03475f78567","obj_type":1,"condition":{"logics":[{"type":"go","to_node_id":"61adf4a8513aa03475f78737","chTime":1524227653473}],"semaphors":[]},"title":"Start","description":"","x":1564,"y":-256,"uuid":"03cb5c1d-3c2c-4f9e-9a87-72018c495a0c","extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}","options":null},{"id":"61adf4a8513aa03475f78661","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"61adf4a782ba9651b2f9020a","conditions":[{"fun":"eq","const":"hardware","param":"__conveyor_code_return_type_error__","cast":"string"}]},{"type":"go_if_const","to_node_id":"61adf4a882ba9651b2f9037d","conditions":[{"fun":"eq","const":"software","param":"__conveyor_code_return_type_error__","cast":"string"}]},{"type":"go","to_node_id":"61adf4a882ba9651b2f9037d"}],"semaphors":[]},"title":"","description":"","x":1684,"y":132,"uuid":"35a3c9ae-eb78-416a-b3ad-4c5a02a25cb9","extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}","options":null},{"id":"61adf4a8513aa03475f78737","obj_type":0,"condition":{"logics":[{"type":"set_param","extra":{"localization":"{{conv[1012002].ref[localization]}}"},"err_node_id":"61adf4a7513aa03475f78568","extra_type":{"localization":"object"},"chTime":1513152158373},{"type":"go","to_node_id":"61adf4a782ba9651b2f90208","chTime":1542879499988}],"semaphors":[]},"title":"GET localization","description":"","x":1464,"y":-148,"uuid":"0e46ae01-dd47-4bb6-a2c9-707588f6716c","extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}","options":null},{"id":"61adf4a882ba9651b2f9037d","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"","description":"","x":1784,"y":160,"uuid":"8d0cae49-3e50-4cff-8c55-3fc5906c716d","extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}","options":null},{"id":"61adf4a8513aa03475f786da","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"message":"{{message}}"},"res_data_type":{"message":"object"},"mode":"key_value","throw_exception":false},{"type":"go","to_node_id":"61adf4a8513aa03475f78660","chTime":1524835612928}],"semaphors":[]},"title":"Not command","description":"","x":1464,"y":464,"uuid":"168ba7a1-46c0-43b3-b877-2aee9115dbfa","extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}","options":null},{"id":"61adf4a8513aa03475f78660","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Not command","description":"","x":1564,"y":652,"uuid":"85358749-f92a-49be-a0f9-ba07ef7196b4","extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}","options":null},{"id":"61adf4a882ba9651b2f90300","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Command","description":"","x":1884,"y":652,"uuid":"128a507f-4621-460a-b024-05472ca989dd","extra":"{\"modeForm\":\"collapse\",\"icon\":\"success\"}","options":null},{"id":"61adf4a782ba9651b2f9020a","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"61adf4a782ba9651b2f90208"}]},"title":"","description":"","x":1684,"y":64,"uuid":"affa4b95-0d94-49be-99d5-ce3975d7a5e3","extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}","options":null},{"id":"61adf4a782ba9651b2f90207","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"command":"{{message.text}}","event":"command"},"res_data_type":{"command":"string","event":"string"},"mode":"key_value","throw_exception":false},{"type":"go","to_node_id":"61adf4a882ba9651b2f90300","chTime":1524835590279}],"semaphors":[]},"title":"Command","description":"","x":1784,"y":468,"uuid":"f22849e4-a181-48ab-8e80-f629b0bd6e0b","extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}","options":null},{"id":"61adf4a782ba9651b2f90208","obj_type":0,"condition":{"logics":[{"type":"api_code","err_node_id":"61adf4a8513aa03475f78661","src":"for (var key in data.localization) {\n    for (var lang in data.localization[key]) {\n        var text = data.message.text.trim();\n        if (data.localization[key][lang] == text) {\n            data.message.text = key;\n            break;\n        }\n    }\n}","lang":"js"},{"type":"go","to_node_id":"61adf4a7513aa03475f78566","chTime":1542879919224}],"semaphors":[]},"title":"Try to convert to command","description":"","x":1464,"y":64,"uuid":"3855c122-5a22-4c15-b70e-57812309fb5c","extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}","options":null},{"id":"61adf4a7513aa03475f78568","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"","description":"","x":1716,"y":-57,"uuid":"20254a70-0b04-46c2-9fc2-c6eb9515d4ad","extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}","options":null}],"web_settings":[[],[]]},"conv_type":"process","uuid":"2c8a3281-04c6-4cb3-ba2c-c4f4e6a788e1"}
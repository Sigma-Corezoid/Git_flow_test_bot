{"obj_type":1,"obj_id":1012025,"parent_id":424867,"title":"Save Messages to Sender","description":"","status":"active","params":[{"name":"channel","type":"string","descr":"","flags":["required","input"],"regex":"","regex_error_text":""},{"name":"chat_id","type":"string","descr":"","flags":["required","input"],"regex":"","regex_error_text":""},{"name":"sender","type":"string","descr":"","flags":["required","input"],"regex":"","regex_error_text":""},{"name":"text","type":"string","descr":"","flags":["required","input"],"regex":"","regex_error_text":""}],"ref_mask":true,"conv_type":"process","scheme":{"nodes":[{"id":"61adf4a882ba9651b2f90324","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"61adf4a7513aa03475f785b0","conditions":[{"fun":"eq","const":"hardware","param":"__conveyor_api_return_type_error__","cast":"string"}]},{"type":"go_if_const","to_node_id":"61adf4a7513aa03475f785b0","conditions":[{"fun":"eq","const":"software","param":"__conveyor_api_return_type_error__","cast":"string"},{"fun":"eq","const":"api_bad_answer","param":"__conveyor_api_return_type_tag__","cast":"string"}]},{"type":"go_if_const","conditions":[{"param":"codeError","const":"user_not_found","fun":"eq","cast":"string"}],"to_node_id":"61adf4a7513aa03475f785b1","chTime":1524210529452},{"type":"go","to_node_id":"61adf4a782ba9651b2f90255"}],"semaphors":[]},"title":"","description":"","x":764,"y":620,"uuid":"34dada54-b37d-41e7-87b6-66cf42caad16","extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}","options":null},{"id":"61adf4a7513aa03475f785b1","obj_type":3,"condition":{"logics":[{"type":"api_rpc","err_node_id":"61adf4a782ba9651b2f90257","extra":{},"extra_type":{},"group":"all","conv_id":1012024,"user_id":76110},{"type":"go","to_node_id":"61adf4a882ba9651b2f90325","chTime":1524210552592}],"semaphors":[]},"title":"initChat","description":"","x":916,"y":620,"uuid":"ca1d7442-7506-4627-aac3-2b0b8b883b83","extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}","options":null},{"id":"61adf4a782ba9651b2f90257","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"61adf4a8513aa03475f78682","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_result__","cast":"string"}]},{"type":"go_if_const","to_node_id":"61adf4a8513aa03475f78682","conditions":[{"fun":"eq","const":"rpc_task_fatal_error","param":"__conveyor_rpc_return_type_tag__","cast":"string"}]},{"type":"go_if_const","to_node_id":"61adf4a8513aa03475f786ec","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_result__","cast":"string"}]},{"type":"go_if_const","to_node_id":"61adf4a8513aa03475f786ec","conditions":[{"fun":"eq","const":"rpc_reply_exception","param":"__conveyor_rpc_reply_return_type_tag__","cast":"string"}]},{"type":"go","to_node_id":"61adf4a8513aa03475f786ec"}],"semaphors":[]},"title":"","description":"","x":1144,"y":688,"uuid":"b1049d92-3b5b-4af9-8275-c32f8002c195","extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}","options":null},{"id":"61adf4a782ba9651b2f90254","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Client message NOT sent to chat","description":"","x":168,"y":628,"uuid":"38739d7a-b83a-46f7-8773-048afff2bfeb","extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}","options":null},{"id":"61adf4a782ba9651b2f90255","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"","description":"","x":792,"y":732,"uuid":"c3b035ad-7044-44ee-8b7d-e9c5d8ee6752","extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}","options":null},{"id":"61adf4a782ba9651b2f90256","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Messages with operator","description":"","x":360,"y":432,"uuid":"f5bc0af4-4c7a-49c4-a36b-6bc2a7331244","extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}","options":null},{"id":"61adf4a7513aa03475f785b3","obj_type":1,"condition":{"logics":[{"type":"go","to_node_id":"61adf4a8513aa03475f78683","chTime":1564489211122}],"semaphors":[]},"title":"Start","description":"","x":640,"y":100,"uuid":"23ad736b-3963-4dbe-b384-8bdf90af3b6c","extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}","options":null},{"id":"61adf4a8513aa03475f78682","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"61adf4a7513aa03475f785b1"}]},"title":"","description":"","x":1144,"y":620,"uuid":"24e4e915-f08e-4db9-99e9-cf0b25dc04e9","extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}","options":null},{"id":"61adf4a882ba9651b2f90325","obj_type":0,"condition":{"logics":[{"to_node_id":"61adf4a8513aa03475f78722","type":"go_if_const","conditions":[{"param":"status","const":"error","fun":"eq","cast":"string"}],"chTime":1524210561447},{"type":"go","to_node_id":"61adf4a7513aa03475f785af","chTime":1524210563906}],"semaphors":[]},"title":"","description":"","x":916,"y":876,"uuid":"0d4af1ba-aee1-4248-b19b-f66b3e26b085","extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}","options":null},{"id":"61adf4a8513aa03475f786ec","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"","description":"","x":1256,"y":716,"uuid":"0eeb6ce8-a316-4257-8185-7a4c89a3b95f","extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}","options":null},{"id":"61adf4a8513aa03475f78683","obj_type":0,"condition":{"logics":[{"type":"set_param","extra":{"sender_chat_id":"{{conv[1012023].ref[{{channel}}_{{chat_id}}].sender_chat_id}}","isOperatorConnected":"{{conv[1012023].ref[{{channel}}_{{chat_id}}].isOperatorConnected}}"},"extra_type":{"sender_chat_id":"string","isOperatorConnected":"boolean"},"err_node_id":"61adf4a7513aa03475f785b1","chTime":1564486584711},{"type":"go","to_node_id":"61adf4a882ba9651b2f903dc","chTime":1564486491814}],"semaphors":[]},"title":"Set Token","description":"","x":540,"y":180,"uuid":"95b84e7f-a3a3-401f-9ca9-8fcd90215f1c","extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}","options":null},{"id":"61adf4a8513aa03475f78722","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Failed to create a new chat at Sender","description":"","x":1200,"y":952,"uuid":"245d577a-7794-4da4-b86a-f51345c18fca","extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}","options":null},{"id":"61adf4a8513aa03475f786ed","obj_type":0,"condition":{"logics":[{"node_title":"","conditions":[{"fun":"not_eq","const":"ok","param":"answerParam","cast":"string"}],"to_node_id":"61adf4a782ba9651b2f90254","type":"go_if_const","data":[{"fun":"not_eq","const":"ok","param":"answerParam","cast":"string"}]},{"type":"go","to_node_id":"61adf4a7513aa03475f785b2","chTime":1488876764802}],"semaphors":[]},"title":"Client message sent to chat?","description":"","x":260,"y":536,"uuid":"a8b79c84-0a54-43ff-9813-54a9a48493dd","extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}","options":null},{"id":"61adf4a7513aa03475f785b0","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"61adf4a7513aa03475f785af"}]},"title":"","description":"","x":764,"y":536,"uuid":"5b13d7b0-1b43-4e4a-a8f0-62acd43346d4","extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}","options":null},{"id":"61adf4a882ba9651b2f903dc","obj_type":0,"condition":{"logics":[{"to_node_id":"61adf4a782ba9651b2f90256","type":"go_if_const","conditions":[{"param":"isOperatorConnected","const":"true","fun":"eq","cast":"boolean"}],"chTime":1564488969310},{"type":"go","to_node_id":"61adf4a7513aa03475f785af","chTime":1564489095903}],"semaphors":[]},"title":"","description":"","x":540,"y":348,"uuid":"4451d306-732d-4991-929f-98d8e8e5ad26","extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}","options":null},{"id":"61adf4a7513aa03475f785b2","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Client message sent to chat","description":"","x":360,"y":740,"uuid":"514e7ad7-61fe-4d87-a8c7-226666c2c91f","extra":"{\"modeForm\":\"collapse\",\"icon\":\"success\"}","options":null},{"id":"61adf4a7513aa03475f785af","obj_type":0,"condition":{"logics":[{"type":"api_sender","err_node_id":"61adf4a882ba9651b2f90324","form_type":"action","conv_id":"{{root.conv_id}}","version":2,"name":"","extra_type":{"categoryId":"string","robotId":"string","from":"string","companyId":"string","formId":"string","convId":"string","procId":"string","model":"object","modelType":"object"},"model":{"clientId":"{{chat_id}}","channel":"{{channel}}","class":"text","model":{"text":"{{message.text}}"}},"model_type":{"clientId":"string","channel":"string","class":"string","model":"object"},"extra":{"categoryId":"widgets","robotId":"corezoidWidgetSend","from":"i647937213","companyId":"sender","formId":"","convId":"{{root.conv_id}}","procId":"{{root.ref}}","model":{"clientId":"{{chat_id}}","channel":"{{channel}}","class":"text","model":{"text":"{{sender}}{{text}}"}},"modelType":{"clientId":"string","channel":"string","class":"string","model":"object"}},"max_threads":25,"content-type":"application/json","mode":"POST","format":""},{"type":"go","to_node_id":"61adf4a8513aa03475f786ed","chTime":1488879960618}],"semaphors":[]},"title":"Send message for Bot Platform","description":"","x":540,"y":536,"uuid":"df45dc4e-cf42-4216-a6a6-c7a1cd26dff4","extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}","options":null}],"web_settings":[[],[]]},"conv_type":"process","uuid":"d0c2b4d1-f025-4132-bb61-9e227ce3f861"}
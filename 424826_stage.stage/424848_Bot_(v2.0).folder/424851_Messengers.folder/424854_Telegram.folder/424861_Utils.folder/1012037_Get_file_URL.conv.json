{"obj_type":1,"obj_id":1012037,"parent_id":424861,"title":"Get file URL","description":"","status":"active","params":[{"name":"file_id","type":"string","descr":"url","flags":["input","required"],"regex":"","regex_error_text":""}],"ref_mask":true,"conv_type":"process","scheme":{"nodes":[{"id":"61adf4a7513aa03475f78557","obj_type":0,"condition":{"logics":[{"response":{"header":"{{header}}","body":"{{body}}"},"method":"GET","customize_response":false,"content_type":"application/json","max_threads":"5","response_type":{"header":"object","body":"object"},"url":"https://api.telegram.org/bot{{token}}/getFile?file_id={{file_id}}","extra_headers":{},"err_node_id":"61adf4a882ba9651b2f902f9","send_sys":true,"debug_info":false,"is_migrate":true,"format":"","extra":{},"cert_pem":"","type":"api","extra_type":{}},{"node_title":"Step 2","to_node_id":"61adf4a782ba9651b2f901fa","type":"go"}],"semaphors":[]},"title":"GET file URL","description":"","x":-44,"y":-160,"uuid":"96092cbd-8674-474d-bd3b-e5e1213aff54","extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}","options":null},{"id":"61adf4a782ba9651b2f901fa","obj_type":0,"condition":{"logics":[{"err_node_id":"61adf4a882ba9651b2f903d7","extra":{"file_url":"https://api.telegram.org/file/bot{{token}}/{{result.file_path}}"},"type":"set_param","data":{"url":"https://api.telegram.org/file/bot{{token}}/{{result.file_path}}"},"extra_type":{"file_url":"string"}},{"node_title":"Reply OK","to_node_id":"61adf4a7513aa03475f78555","type":"go"}],"semaphors":[]},"title":"SET file url","description":"","x":-44,"y":12,"uuid":"565e277b-01e5-4da1-b877-669b92b42173","extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}","options":null},{"id":"61adf4a882ba9651b2f902f9","obj_type":3,"condition":{"logics":[{"node_title":"Step 1: Delay","conditions":[{"fun":"eq","const":"hardware","param":"__conveyor_api_return_type_error__","cast":"string"}],"to_node_id":"61adf4a882ba9651b2f90378","index":1,"type":"go_if_const","data":[{"fun":"eq","const":"hardware","param":"__conveyor_api_return_type_error__","cast":"string"}]},{"node_title":"Step 1: Delay","conditions":[{"fun":"eq","const":"software","param":"__conveyor_api_return_type_error__","cast":"string"},{"fun":"eq","const":"api_bad_answer","param":"__conveyor_api_return_type_tag__","cast":"string"}],"to_node_id":"61adf4a882ba9651b2f90378","index":1,"format":"json","type":"go_if_const","data":[{"fun":"eq","const":"software","param":"__conveyor_api_return_type_error__","cast":"string"},{"fun":"eq","const":"api_bad_answer","param":"__conveyor_api_return_type_tag__","cast":"string"}]},{"to_node_id":"61adf4a882ba9651b2f903d7","type":"go"}],"semaphors":[]},"title":"Step 1: Escalation node","description":"null","x":208,"y":-88,"uuid":"4a857d5c-fc59-44a7-9abb-a0906e278ac5","extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}","options":null},{"id":"61adf4a882ba9651b2f903b9","obj_type":0,"condition":{"logics":[{"type":"set_param","extra":{"token":"{{conv[1012000].ref[token].telegram}}"},"extra_type":{"token":"string"},"err_node_id":"61adf4a8513aa03475f78659"},{"type":"go","to_node_id":"61adf4a7513aa03475f78557","chTime":1514888006364}],"semaphors":[]},"title":"Config","description":"","x":28,"y":-296,"uuid":"db14bdbb-d6aa-44ac-99d8-63c1d0e64a1a","extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}","options":null},{"id":"61adf4a782ba9651b2f901f9","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"final","description":"","x":56,"y":384,"uuid":"e878911b-39fc-4b03-94f5-39e2c5a21e8a","extra":"{\"modeForm\":\"collapse\",\"icon\":\"success\"}","options":null},{"id":"61adf4a7513aa03475f78556","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"error","description":"","x":664,"y":-60,"uuid":"bbcf6304-1641-4f11-b970-f804ceb81b23","extra":"{\"modeForm\":\"collapse\",\"icon\":\"success\"}","options":null},{"id":"61adf4a7513aa03475f78555","obj_type":0,"condition":{"logics":[{"res_data":{"url":"{{file_url}}","status":"ok"},"res_data_type":{"url":"string","status":"string"},"throw_exception":false,"exception_reason":"","type":"api_rpc_reply","mode":"key_value"},{"node_title":"final","to_node_id":"61adf4a782ba9651b2f901f9","type":"go"}],"semaphors":[]},"title":"Success","description":"","x":-44,"y":208,"uuid":"34c0cd04-48ea-43c6-be29-44a98d5d332c","extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}","options":null},{"id":"61adf4a882ba9651b2f903d7","obj_type":3,"condition":{"logics":[{"res_data":{"status":"error","error_message":"Corezoid: Внимание! Клиент пытается отправить изображение. Произошел сбой. Вежливо попросите повторить отправку. Спасибо."},"res_data_type":{"status":"string","error_message":"string"},"throw_exception":false,"exception_reason":"","type":"api_rpc_reply","mode":"key_value"},{"to_node_id":"61adf4a7513aa03475f78556","type":"go"}],"semaphors":[]},"title":"Error","description":"","x":400,"y":-88,"uuid":"08e275e6-bb77-478d-9c56-b57f48f71b3e","extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}","options":null},{"id":"61adf4a882ba9651b2f90378","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":"30","to_node_id":"61adf4a7513aa03475f78557"}]},"title":"Step 1: Delay","description":"null","x":208,"y":-160,"uuid":"b0614a3a-68f2-4225-8fd8-b897ccf1f221","extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}","options":null},{"id":"61adf4a8513aa03475f78658","obj_type":1,"condition":{"logics":[{"type":"go","to_node_id":"61adf4a882ba9651b2f903b9","chTime":1514888005437}],"semaphors":[]},"title":"start","description":"","x":56,"y":-412,"uuid":"8b04504f-06e1-48f6-bb11-9dfcc3de06f5","extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}","options":null},{"id":"61adf4a8513aa03475f78659","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"","description":"","x":152,"y":-268,"uuid":"f8859e48-ca48-4f4e-aa9d-948c28eab774","extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}","options":null}],"web_settings":[[],[]]},"conv_type":"process","uuid":"7464a85b-836c-4608-9a09-88536c20a031"}
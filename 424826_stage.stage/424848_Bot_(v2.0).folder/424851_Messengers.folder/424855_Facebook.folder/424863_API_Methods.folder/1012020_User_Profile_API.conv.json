{"obj_type":1,"obj_id":1012020,"parent_id":424863,"title":"User Profile API","description":"","status":"active","params":[],"ref_mask":true,"conv_type":"process","scheme":{"nodes":[{"id":"61adf4a7513aa03475f7856f","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"chat_id":"{{chat_id}}","first_name":"{{first_name}}","last_name":"{{last_name}}","gender":"{{gender}}","user_picture":"{{profile_pic}}","country":"{{country}}","language":"{{language}}","timezone":"{{timezone}}","status":"ok"},"res_data_type":{"chat_id":"string","first_name":"string","last_name":"string","gender":"string","user_picture":"string","country":"string","language":"string","timezone":"number","status":"string"},"mode":"key_value","throw_exception":false},{"type":"go","to_node_id":"61adf4a882ba9651b2f90381","chTime":1515184163234}],"semaphors":[]},"title":"Success","description":"","x":1080,"y":648,"uuid":"4f4d9f1f-d3e5-4012-a3d7-2ee350ec98b1","extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}","options":null},{"id":"61adf4a782ba9651b2f90214","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"61adf4a8513aa03475f78664"}]},"title":"","description":"","x":1332,"y":432,"uuid":"4d062e09-b5b9-4757-ac02-f058f4bf28c2","extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}","options":null},{"id":"61adf4a8513aa03475f78665","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"status":"error","error_code":"{{error.code}}","error_message":"{{error.message}}"},"res_data_type":{"status":"string","error_code":"number","error_message":"string"},"mode":"key_value","throw_exception":true,"exception_reason":"Failed to get user profile data"},{"type":"go","to_node_id":"61adf4a782ba9651b2f90213","chTime":1515145897107}],"semaphors":[]},"title":"Error","description":"","x":1404,"y":288,"uuid":"44186b89-a112-4d92-a99e-ae5832433617","extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}","options":null},{"id":"61adf4a882ba9651b2f90305","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"61adf4a882ba9651b2f903d8"}]},"title":"","description":"","x":1328,"y":220,"uuid":"18ee40d8-5680-454c-b407-c7c130ba5db8","extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}","options":null},{"id":"61adf4a7513aa03475f78571","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"","description":"","x":1272,"y":84,"uuid":"f12c6e66-2a1e-4a49-8b2d-8920c20d3bff","extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}","options":null},{"id":"61adf4a882ba9651b2f90381","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Final","description":"","x":1180,"y":844,"uuid":"9164d141-2ecb-4878-b05f-bd94f0d544d4","extra":"{\"modeForm\":\"collapse\",\"icon\":\"success\"}","options":null},{"id":"61adf4a8513aa03475f78664","obj_type":0,"condition":{"logics":[{"type":"api_code","err_node_id":"61adf4a782ba9651b2f90212","src":"var tmp = data.locale.split(\"_\");\ndata.language = tmp[0];\ndata.country = tmp[1];","lang":"js"},{"type":"go","to_node_id":"61adf4a7513aa03475f7856f","chTime":1515148405272}],"semaphors":[]},"title":"Parse country and language","description":"","x":1080,"y":432,"uuid":"be28ba6c-6171-437d-a4ec-853f98fb6014","extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}","options":null},{"id":"61adf4a8513aa03475f78719","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"","description":"","x":1432,"y":528,"uuid":"47e8c7b4-c082-4b01-a5a7-ea63488a83ca","extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}","options":null},{"id":"61adf4a882ba9651b2f903d8","obj_type":0,"condition":{"logics":[{"type":"api","err_node_id":"61adf4a882ba9651b2f90380","format":"","method":"GET","url":"https://graph.facebook.com/v2.6/{{chat_id}}?fields=first_name,last_name,profile_pic,locale,timezone,gender&access_token={{token}}","extra":{},"extra_type":{},"max_threads":5,"debug_info":false,"customize_response":false,"response":{"header":"{{header}}","body":"{{body}}"},"response_type":{"header":"object","body":"object"},"extra_headers":{},"send_sys":true,"cert_pem":"","content_type":"application/json","is_migrate":true},{"type":"go","to_node_id":"61adf4a8513aa03475f78664","chTime":1515145274788}],"semaphors":[]},"title":"User Profile API","description":"","x":1080,"y":224,"uuid":"9854aa4d-32ee-4ebd-8a4b-a41ca11ad702","extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}","options":null},{"id":"61adf4a882ba9651b2f90380","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"61adf4a882ba9651b2f90305","conditions":[{"fun":"eq","const":"hardware","param":"__conveyor_api_return_type_error__","cast":"string"}]},{"type":"go_if_const","to_node_id":"61adf4a8513aa03475f78665","conditions":[{"fun":"eq","const":"software","param":"__conveyor_api_return_type_error__","cast":"string"},{"fun":"eq","const":"api_bad_answer","param":"__conveyor_api_return_type_tag__","cast":"string"},{"fun":"eq","const":"no_scheme","param":"__conveyor_api_return_description__","cast":"string"}]},{"type":"go_if_const","to_node_id":"61adf4a882ba9651b2f90305","conditions":[{"fun":"eq","const":"software","param":"__conveyor_api_return_type_error__","cast":"string"},{"fun":"eq","const":"api_bad_answer","param":"__conveyor_api_return_type_tag__","cast":"string"}]},{"type":"go","to_node_id":"61adf4a8513aa03475f78665"}],"semaphors":[]},"title":"","description":"","x":1328,"y":288,"uuid":"02f88ef9-36f6-4fe5-bbbf-38fab196fafd","extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}","options":null},{"id":"61adf4a7513aa03475f78572","obj_type":1,"condition":{"logics":[{"type":"go","to_node_id":"61adf4a7513aa03475f78570"}],"semaphors":[]},"title":"Start","description":"","x":1180,"y":-36,"uuid":"999a5bdd-7d0e-47bd-a64a-7ddc4eba2364","extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}","options":null},{"id":"61adf4a7513aa03475f78570","obj_type":0,"condition":{"logics":[{"type":"set_param","extra":{"token":"{{conv[1012000].ref[token].facebook}}"},"extra_type":{"token":"string"},"err_node_id":"61adf4a7513aa03475f78571"},{"type":"go","to_node_id":"61adf4a882ba9651b2f903d8","chTime":1515145502219}],"semaphors":[]},"title":"Set Token","description":"","x":1152,"y":56,"uuid":"3cbf1d27-4a3b-45cc-92e4-b6f166568738","extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}","options":null},{"id":"61adf4a782ba9651b2f90213","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"","description":"","x":1432,"y":244,"uuid":"9dc2562a-d6ff-4973-be1d-6b25783e01d0","extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}","options":null},{"id":"61adf4a782ba9651b2f90212","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"61adf4a782ba9651b2f90214","conditions":[{"fun":"eq","const":"hardware","param":"__conveyor_code_return_type_error__","cast":"string"}]},{"type":"go_if_const","to_node_id":"61adf4a8513aa03475f78719","conditions":[{"fun":"eq","const":"software","param":"__conveyor_code_return_type_error__","cast":"string"}]},{"type":"go","to_node_id":"61adf4a8513aa03475f78719"}],"semaphors":[]},"title":"","description":"","x":1332,"y":500,"uuid":"254db914-29a7-4684-b214-9b43019e32a8","extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}","options":null}],"web_settings":[[],[]]},"conv_type":"process","uuid":"8a9d7be2-83f3-44b0-8ae4-24ff8658d6c4"}